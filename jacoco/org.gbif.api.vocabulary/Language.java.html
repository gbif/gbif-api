<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Language.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GBIF Common :: API</a> &gt; <a href="index.source.html" class="el_package">org.gbif.api.vocabulary</a> &gt; <span class="el_source">Language.java</span></div><h1>Language.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2020 Global Biodiversity Information Facility (GBIF)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.gbif.api.vocabulary;

import java.io.IOException;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.Locale;

import org.apache.commons.lang3.StringUtils;

import com.fasterxml.jackson.annotation.JsonValue;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.DeserializationContext;
import com.fasterxml.jackson.databind.JsonDeserializer;
import com.fasterxml.jackson.databind.JsonSerializer;
import com.fasterxml.jackson.databind.KeyDeserializer;
import com.fasterxml.jackson.databind.SerializerProvider;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonSerialize;

/**
 * Enumeration for all ISO 639-1 language codes using 2 lower case letters. The enumeration maps to
 * 3 letter codes and Locales.
 *
 * @see &lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_639&quot;&gt;Wikipedia on ISO-639&lt;/a&gt;
 * @see &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html&quot;&gt;Locale javadoc&lt;/a&gt;
 */
<span class="fc" id="L44">@JsonSerialize(using = Language.IsoSerializer.class, keyUsing = Language.IsoKeySerializer.class)</span>
@JsonDeserialize(
    using = Language.LenientDeserializer.class,
    keyUsing = Language.LenientKeyDeserializer.class)
public enum Language {

  /** Abkhazian. */
<span class="fc" id="L51">  ABKHAZIAN(&quot;ab&quot;),</span>

  /** Afar. */
<span class="fc" id="L54">  AFAR(&quot;aa&quot;),</span>

  /** Afrikaans. */
<span class="fc" id="L57">  AFRIKAANS(&quot;af&quot;),</span>

  /** Akan. */
<span class="fc" id="L60">  AKAN(&quot;ak&quot;),</span>

  /** Albanian. */
<span class="fc" id="L63">  ALBANIAN(&quot;sq&quot;),</span>

  /** Amharic. */
<span class="fc" id="L66">  AMHARIC(&quot;am&quot;),</span>

  /** Arabic. */
<span class="fc" id="L69">  ARABIC(&quot;ar&quot;),</span>

  /** Aragonese. */
<span class="fc" id="L72">  ARAGONESE(&quot;an&quot;),</span>

  /** Armenian. */
<span class="fc" id="L75">  ARMENIAN(&quot;hy&quot;),</span>

  /** Assamese. */
<span class="fc" id="L78">  ASSAMESE(&quot;as&quot;),</span>

  /** Avaric. */
<span class="fc" id="L81">  AVARIC(&quot;av&quot;),</span>

  /** Avestan. */
<span class="fc" id="L84">  AVESTAN(&quot;ae&quot;),</span>

  /** Aymara. */
<span class="fc" id="L87">  AYMARA(&quot;ay&quot;),</span>

  /** Azerbaijani. */
<span class="fc" id="L90">  AZERBAIJANI(&quot;az&quot;),</span>

  /** Bambara. */
<span class="fc" id="L93">  BAMBARA(&quot;bm&quot;),</span>

  /** Bashkir. */
<span class="fc" id="L96">  BASHKIR(&quot;ba&quot;),</span>

  /** Basque. */
<span class="fc" id="L99">  BASQUE(&quot;eu&quot;),</span>

  /** Belarusian. */
<span class="fc" id="L102">  BELARUSIAN(&quot;be&quot;),</span>

  /** Bengali. */
<span class="fc" id="L105">  BENGALI(&quot;bn&quot;),</span>

  /** Bihari. */
<span class="fc" id="L108">  BIHARI(&quot;bh&quot;),</span>

  /** Bislama. */
<span class="fc" id="L111">  BISLAMA(&quot;bi&quot;),</span>

  /** Bosnian. */
<span class="fc" id="L114">  BOSNIAN(&quot;bs&quot;),</span>

  /** Breton. */
<span class="fc" id="L117">  BRETON(&quot;br&quot;),</span>

  /** Bulgarian. */
<span class="fc" id="L120">  BULGARIAN(&quot;bg&quot;),</span>

  /** Burmese. */
<span class="fc" id="L123">  BURMESE(&quot;my&quot;),</span>

  /** Catalan. */
<span class="fc" id="L126">  CATALAN(&quot;ca&quot;),</span>

  /** Chamorro. */
<span class="fc" id="L129">  CHAMORRO(&quot;ch&quot;),</span>

  /** Chechen. */
<span class="fc" id="L132">  CHECHEN(&quot;ce&quot;),</span>

  /** Chinese. */
<span class="fc" id="L135">  CHINESE(&quot;zh&quot;),</span>

  /** Church Slavic. */
<span class="fc" id="L138">  CHURCH_SLAVIC(&quot;cu&quot;),</span>

  /** Chuvash. */
<span class="fc" id="L141">  CHUVASH(&quot;cv&quot;),</span>

  /** Cornish. */
<span class="fc" id="L144">  CORNISH(&quot;kw&quot;),</span>

  /** Corsican. */
<span class="fc" id="L147">  CORSICAN(&quot;co&quot;),</span>

  /** Cree. */
<span class="fc" id="L150">  CREE(&quot;cr&quot;),</span>

  /** Croatian. */
<span class="fc" id="L153">  CROATIAN(&quot;hr&quot;),</span>

  /** Czech. */
<span class="fc" id="L156">  CZECH(&quot;cs&quot;),</span>

  /** Danish. */
<span class="fc" id="L159">  DANISH(&quot;da&quot;),</span>

  /** Divehi. */
<span class="fc" id="L162">  DIVEHI(&quot;dv&quot;),</span>

  /** Dutch. */
<span class="fc" id="L165">  DUTCH(&quot;nl&quot;),</span>

  /** Dzongkha. */
<span class="fc" id="L168">  DZONGKHA(&quot;dz&quot;),</span>

  /** English. */
<span class="fc" id="L171">  ENGLISH(&quot;en&quot;),</span>

  /** Esperanto. */
<span class="fc" id="L174">  ESPERANTO(&quot;eo&quot;),</span>

  /** Estonian. */
<span class="fc" id="L177">  ESTONIAN(&quot;et&quot;),</span>

  /** Ewe. */
<span class="fc" id="L180">  EWE(&quot;ee&quot;),</span>

  /** Faroese. */
<span class="fc" id="L183">  FAROESE(&quot;fo&quot;),</span>

  /** Fijian. */
<span class="fc" id="L186">  FIJIAN(&quot;fj&quot;),</span>

  /** Finnish. */
<span class="fc" id="L189">  FINNISH(&quot;fi&quot;),</span>

  /** French. */
<span class="fc" id="L192">  FRENCH(&quot;fr&quot;),</span>

  /** Frisian. */
<span class="fc" id="L195">  FRISIAN(&quot;fy&quot;),</span>

  /** Fulah. */
<span class="fc" id="L198">  FULAH(&quot;ff&quot;),</span>

  /** Gallegan. */
<span class="fc" id="L201">  GALLEGAN(&quot;gl&quot;),</span>

  /** Ganda. */
<span class="fc" id="L204">  GANDA(&quot;lg&quot;),</span>

  /** Georgian. */
<span class="fc" id="L207">  GEORGIAN(&quot;ka&quot;),</span>

  /** German. */
<span class="fc" id="L210">  GERMAN(&quot;de&quot;),</span>

  /** Greek. */
<span class="fc" id="L213">  GREEK(&quot;el&quot;),</span>

  /** Greenlandic. */
<span class="fc" id="L216">  GREENLANDIC(&quot;kl&quot;),</span>

  /** Guarani. */
<span class="fc" id="L219">  GUARANI(&quot;gn&quot;),</span>

  /** Gujarati. */
<span class="fc" id="L222">  GUJARATI(&quot;gu&quot;),</span>

  /** Haitian. */
<span class="fc" id="L225">  HAITIAN(&quot;ht&quot;),</span>

  /** Hausa. */
<span class="fc" id="L228">  HAUSA(&quot;ha&quot;),</span>

  /** Hebrew. */
<span class="fc" id="L231">  HEBREW(&quot;he&quot;),</span>

  /** Herero. */
<span class="fc" id="L234">  HERERO(&quot;hz&quot;),</span>

  /** Hindi. */
<span class="fc" id="L237">  HINDI(&quot;hi&quot;),</span>

  /** Hiri Motu. */
<span class="fc" id="L240">  HIRI_MOTU(&quot;ho&quot;),</span>

  /** Hungarian. */
<span class="fc" id="L243">  HUNGARIAN(&quot;hu&quot;),</span>

  /** Icelandic. */
<span class="fc" id="L246">  ICELANDIC(&quot;is&quot;),</span>

  /** Ido. */
<span class="fc" id="L249">  IDO(&quot;io&quot;),</span>

  /** Igbo. */
<span class="fc" id="L252">  IGBO(&quot;ig&quot;),</span>

  /** Indonesian. */
<span class="fc" id="L255">  INDONESIAN(&quot;id&quot;),</span>

  /** Interlingua. */
<span class="fc" id="L258">  INTERLINGUA(&quot;ia&quot;),</span>

  /** Interlingue. */
<span class="fc" id="L261">  INTERLINGUE(&quot;ie&quot;),</span>

  /** Inuktitut. */
<span class="fc" id="L264">  INUKTITUT(&quot;iu&quot;),</span>

  /** Inupiaq. */
<span class="fc" id="L267">  INUPIAQ(&quot;ik&quot;),</span>

  /** Irish. */
<span class="fc" id="L270">  IRISH(&quot;ga&quot;),</span>

  /** Italian. */
<span class="fc" id="L273">  ITALIAN(&quot;it&quot;),</span>

  /** Japanese. */
<span class="fc" id="L276">  JAPANESE(&quot;ja&quot;),</span>

  /** Javanese. */
<span class="fc" id="L279">  JAVANESE(&quot;jv&quot;),</span>

  /** Kannada. */
<span class="fc" id="L282">  KANNADA(&quot;kn&quot;),</span>

  /** Kanuri. */
<span class="fc" id="L285">  KANURI(&quot;kr&quot;),</span>

  /** Kashmiri. */
<span class="fc" id="L288">  KASHMIRI(&quot;ks&quot;),</span>

  /** Kazakh. */
<span class="fc" id="L291">  KAZAKH(&quot;kk&quot;),</span>

  /** Khmer. */
<span class="fc" id="L294">  KHMER(&quot;km&quot;),</span>

  /** Kikuyu. */
<span class="fc" id="L297">  KIKUYU(&quot;ki&quot;),</span>

  /** Kinyarwanda. */
<span class="fc" id="L300">  KINYARWANDA(&quot;rw&quot;),</span>

  /** Kirghiz. */
<span class="fc" id="L303">  KIRGHIZ(&quot;ky&quot;),</span>

  /** Komi. */
<span class="fc" id="L306">  KOMI(&quot;kv&quot;),</span>

  /** Kongo. */
<span class="fc" id="L309">  KONGO(&quot;kg&quot;),</span>

  /** Korean. */
<span class="fc" id="L312">  KOREAN(&quot;ko&quot;),</span>

  /** Kurdish. */
<span class="fc" id="L315">  KURDISH(&quot;ku&quot;),</span>

  /** Kwanyama. */
<span class="fc" id="L318">  KWANYAMA(&quot;kj&quot;),</span>

  /** Lao. */
<span class="fc" id="L321">  LAO(&quot;lo&quot;),</span>

  /** Latin. */
<span class="fc" id="L324">  LATIN(&quot;la&quot;),</span>

  /** Latvian. */
<span class="fc" id="L327">  LATVIAN(&quot;lv&quot;),</span>

  /** Limburgish. */
<span class="fc" id="L330">  LIMBURGISH(&quot;li&quot;),</span>

  /** Lingala. */
<span class="fc" id="L333">  LINGALA(&quot;ln&quot;),</span>

  /** Lithuanian. */
<span class="fc" id="L336">  LITHUANIAN(&quot;lt&quot;),</span>

  /** Luba-Katanga. */
<span class="fc" id="L339">  LUBA_KATANGA(&quot;lu&quot;),</span>

  /** Luxembourgish. */
<span class="fc" id="L342">  LUXEMBOURGISH(&quot;lb&quot;),</span>

  /** Macedonian. */
<span class="fc" id="L345">  MACEDONIAN(&quot;mk&quot;),</span>

  /** Malagasy. */
<span class="fc" id="L348">  MALAGASY(&quot;mg&quot;),</span>

  /** Malay. */
<span class="fc" id="L351">  MALAY(&quot;ms&quot;),</span>

  /** Malayalam. */
<span class="fc" id="L354">  MALAYALAM(&quot;ml&quot;),</span>

  /** Maltese. */
<span class="fc" id="L357">  MALTESE(&quot;mt&quot;),</span>

  /** Manx. */
<span class="fc" id="L360">  MANX(&quot;gv&quot;),</span>

  /** Maori. */
<span class="fc" id="L363">  MAORI(&quot;mi&quot;),</span>

  /** Marathi. */
<span class="fc" id="L366">  MARATHI(&quot;mr&quot;),</span>

  /** Marshallese. */
<span class="fc" id="L369">  MARSHALLESE(&quot;mh&quot;),</span>

  /** Moldavian. */
<span class="fc" id="L372">  MOLDAVIAN(&quot;mo&quot;),</span>

  /** Mongolian. */
<span class="fc" id="L375">  MONGOLIAN(&quot;mn&quot;),</span>

  /** Nauru. */
<span class="fc" id="L378">  NAURU(&quot;na&quot;),</span>

  /** Navajo. */
<span class="fc" id="L381">  NAVAJO(&quot;nv&quot;),</span>

  /** Ndonga. */
<span class="fc" id="L384">  NDONGA(&quot;ng&quot;),</span>

  /** Nepali. */
<span class="fc" id="L387">  NEPALI(&quot;ne&quot;),</span>

  /** North Ndebele. */
<span class="fc" id="L390">  NORTH_NDEBELE(&quot;nd&quot;),</span>

  /** Northern Sami. */
<span class="fc" id="L393">  NORTHERN_SAMI(&quot;se&quot;),</span>

  /** Norwegian Bokmål. */
<span class="fc" id="L396">  NORWEGIAN_BOKMAL(&quot;nb&quot;),</span>

  /** Norwegian Nynorsk. */
<span class="fc" id="L399">  NORWEGIAN_NYNORSK(&quot;nn&quot;),</span>

  /** Norwegian. */
<span class="fc" id="L402">  NORWEGIAN(&quot;no&quot;),</span>

  /** Nyanja. */
<span class="fc" id="L405">  NYANJA(&quot;ny&quot;),</span>

  /** Occitan. */
<span class="fc" id="L408">  OCCITAN(&quot;oc&quot;),</span>

  /** Ojibwa. */
<span class="fc" id="L411">  OJIBWA(&quot;oj&quot;),</span>

  /** Oriya. */
<span class="fc" id="L414">  ORIYA(&quot;or&quot;),</span>

  /** Oromo. */
<span class="fc" id="L417">  OROMO(&quot;om&quot;),</span>

  /** Ossetian. */
<span class="fc" id="L420">  OSSETIAN(&quot;os&quot;),</span>

  /** Pali. */
<span class="fc" id="L423">  PALI(&quot;pi&quot;),</span>

  /** Panjabi. */
<span class="fc" id="L426">  PANJABI(&quot;pa&quot;),</span>

  /** Persian. */
<span class="fc" id="L429">  PERSIAN(&quot;fa&quot;),</span>

  /** Polish. */
<span class="fc" id="L432">  POLISH(&quot;pl&quot;),</span>

  /** Portuguese. */
<span class="fc" id="L435">  PORTUGUESE(&quot;pt&quot;),</span>

  /** Pushto. */
<span class="fc" id="L438">  PUSHTO(&quot;ps&quot;),</span>

  /** Quechua. */
<span class="fc" id="L441">  QUECHUA(&quot;qu&quot;),</span>

  /** Raeto-Romance. */
<span class="fc" id="L444">  RAETO_ROMANCE(&quot;rm&quot;),</span>

  /** Romanian. */
<span class="fc" id="L447">  ROMANIAN(&quot;ro&quot;),</span>

  /** Rundi. */
<span class="fc" id="L450">  RUNDI(&quot;rn&quot;),</span>

  /** Russian. */
<span class="fc" id="L453">  RUSSIAN(&quot;ru&quot;),</span>

  /** Samoan. */
<span class="fc" id="L456">  SAMOAN(&quot;sm&quot;),</span>

  /** Sango. */
<span class="fc" id="L459">  SANGO(&quot;sg&quot;),</span>

  /** Sanskrit. */
<span class="fc" id="L462">  SANSKRIT(&quot;sa&quot;),</span>

  /** Sardinian. */
<span class="fc" id="L465">  SARDINIAN(&quot;sc&quot;),</span>

  /** Scottish Gaelic. */
<span class="fc" id="L468">  SCOTTISH_GAELIC(&quot;gd&quot;),</span>

  /** Serbian. */
<span class="fc" id="L471">  SERBIAN(&quot;sr&quot;),</span>

  /** Shona. */
<span class="fc" id="L474">  SHONA(&quot;sn&quot;),</span>

  /** Sichuan Yi. */
<span class="fc" id="L477">  SICHUAN_YI(&quot;ii&quot;),</span>

  /** Sindhi. */
<span class="fc" id="L480">  SINDHI(&quot;sd&quot;),</span>

  /** Sinhalese. */
<span class="fc" id="L483">  SINHALESE(&quot;si&quot;),</span>

  /** Slovak. */
<span class="fc" id="L486">  SLOVAK(&quot;sk&quot;),</span>

  /** Slovenian. */
<span class="fc" id="L489">  SLOVENIAN(&quot;sl&quot;),</span>

  /** Somali. */
<span class="fc" id="L492">  SOMALI(&quot;so&quot;),</span>

  /** South Ndebele. */
<span class="fc" id="L495">  SOUTH_NDEBELE(&quot;nr&quot;),</span>

  /** Southern Sotho. */
<span class="fc" id="L498">  SOUTHERN_SOTHO(&quot;st&quot;),</span>

  /** Spanish. */
<span class="fc" id="L501">  SPANISH(&quot;es&quot;),</span>

  /** Sundanese. */
<span class="fc" id="L504">  SUNDANESE(&quot;su&quot;),</span>

  /** Swahili. */
<span class="fc" id="L507">  SWAHILI(&quot;sw&quot;),</span>

  /** Swati. */
<span class="fc" id="L510">  SWATI(&quot;ss&quot;),</span>

  /** Swedish. */
<span class="fc" id="L513">  SWEDISH(&quot;sv&quot;),</span>

  /** Tagalog. */
<span class="fc" id="L516">  TAGALOG(&quot;tl&quot;),</span>

  /** Tahitian. */
<span class="fc" id="L519">  TAHITIAN(&quot;ty&quot;),</span>

  /** Tajik. */
<span class="fc" id="L522">  TAJIK(&quot;tg&quot;),</span>

  /** Tamil. */
<span class="fc" id="L525">  TAMIL(&quot;ta&quot;),</span>

  /** Tatar. */
<span class="fc" id="L528">  TATAR(&quot;tt&quot;),</span>

  /** Telugu. */
<span class="fc" id="L531">  TELUGU(&quot;te&quot;),</span>

  /** Thai. */
<span class="fc" id="L534">  THAI(&quot;th&quot;),</span>

  /** Tibetan. */
<span class="fc" id="L537">  TIBETAN(&quot;bo&quot;),</span>

  /** Tigrinya. */
<span class="fc" id="L540">  TIGRINYA(&quot;ti&quot;),</span>

  /** Tonga. */
<span class="fc" id="L543">  TONGA(&quot;to&quot;),</span>

  /** Tsonga. */
<span class="fc" id="L546">  TSONGA(&quot;ts&quot;),</span>

  /** Tswana. */
<span class="fc" id="L549">  TSWANA(&quot;tn&quot;),</span>

  /** Turkish. */
<span class="fc" id="L552">  TURKISH(&quot;tr&quot;),</span>

  /** Turkmen. */
<span class="fc" id="L555">  TURKMEN(&quot;tk&quot;),</span>

  /** Twi. */
<span class="fc" id="L558">  TWI(&quot;tw&quot;),</span>

  /** Uighur. */
<span class="fc" id="L561">  UIGHUR(&quot;ug&quot;),</span>

  /** Ukrainian. */
<span class="fc" id="L564">  UKRAINIAN(&quot;uk&quot;),</span>

  /** Urdu. */
<span class="fc" id="L567">  URDU(&quot;ur&quot;),</span>

  /** Uzbek. */
<span class="fc" id="L570">  UZBEK(&quot;uz&quot;),</span>

  /** Venda. */
<span class="fc" id="L573">  VENDA(&quot;ve&quot;),</span>

  /** Vietnamese. */
<span class="fc" id="L576">  VIETNAMESE(&quot;vi&quot;),</span>

  /** Volapük. */
<span class="fc" id="L579">  VOLAPÜK(&quot;vo&quot;),</span>

  /** Walloon. */
<span class="fc" id="L582">  WALLOON(&quot;wa&quot;),</span>

  /** Welsh. */
<span class="fc" id="L585">  WELSH(&quot;cy&quot;),</span>

  /** Wolof. */
<span class="fc" id="L588">  WOLOF(&quot;wo&quot;),</span>

  /** Xhosa. */
<span class="fc" id="L591">  XHOSA(&quot;xh&quot;),</span>

  /** Yiddish. */
<span class="fc" id="L594">  YIDDISH(&quot;yi&quot;),</span>

  /** Yoruba. */
<span class="fc" id="L597">  YORUBA(&quot;yo&quot;),</span>

  /** Zhuang. */
<span class="fc" id="L600">  ZHUANG(&quot;za&quot;),</span>

  /** Zulu. */
<span class="fc" id="L603">  ZULU(&quot;zu&quot;),</span>

  /** Unknown or Invalid language. */
<span class="fc" id="L606">  UNKNOWN(&quot;&quot;);</span>

  public static final List&lt;Language&gt; LANGUAGES;

  private final String code;

  static {
<span class="fc" id="L613">    LANGUAGES = Collections.unmodifiableList(Arrays.asList(Language.values()));</span>
<span class="fc" id="L614">  }</span>

  /**
   * @param code the case insensitive 2 or 3 letter codes
   * @return the matching language or UNKNOWN
   */
  public static Language fromIsoCode(String code) {
<span class="pc bpc" id="L621" title="1 of 2 branches missed.">    if (StringUtils.isNotEmpty(code)) {</span>
<span class="fc" id="L622">      String codeLower = code.toLowerCase().trim();</span>
<span class="fc bfc" id="L623" title="All 2 branches covered.">      if (codeLower.length() == 2) {</span>
<span class="pc bpc" id="L624" title="1 of 2 branches missed.">        for (Language language : Language.values()) {</span>
<span class="fc bfc" id="L625" title="All 2 branches covered.">          if (codeLower.equals(language.getIso2LetterCode())) {</span>
<span class="fc" id="L626">            return language;</span>
          }
        }
<span class="fc bfc" id="L629" title="All 2 branches covered.">      } else if (codeLower.length() == 3) {</span>
<span class="pc bpc" id="L630" title="1 of 2 branches missed.">        for (Language language : Language.values()) {</span>
<span class="fc bfc" id="L631" title="All 2 branches covered.">          if (codeLower.equals(language.getIso3LetterCode())) {</span>
<span class="fc" id="L632">            return language;</span>
          }
        }
      }
    }
<span class="fc" id="L637">    return UNKNOWN;</span>
  }

<span class="fc" id="L640">  Language(String code) {</span>
<span class="fc" id="L641">    this.code = code;</span>
<span class="fc" id="L642">  }</span>

  /** @return the 2 letter iso 639-1 code in lower case. */
  public String getIso2LetterCode() {
<span class="fc" id="L646">    return code;</span>
  }

  /** @return the 3 letter iso 639-2 code in lower case. */
  @JsonValue
  public String getIso3LetterCode() {
<span class="fc" id="L652">    return getLocale().getISO3Language();</span>
  }

  public Locale getLocale() {
<span class="fc" id="L656">    return new Locale(code);</span>
  }

  /** @return the language title in the English language. */
  public String getTitleEnglish() {
<span class="fc" id="L661">    return getLocale().getDisplayLanguage(Locale.ENGLISH);</span>
  }

  /** @return the language title in the native language. */
  public String getTitleNative() {
<span class="fc" id="L666">    Locale loc = getLocale();</span>
<span class="fc" id="L667">    return loc.getDisplayLanguage(loc);</span>
  }

  /** Serializes the value in a 3 letter ISO format. */
<span class="fc" id="L671">  public static class IsoSerializer extends JsonSerializer&lt;Language&gt; {</span>

    @Override
    public void serialize(Language value, JsonGenerator jgen, SerializerProvider provider)
        throws IOException {
<span class="fc" id="L676">      jgen.writeString(value.getIso3LetterCode());</span>
<span class="fc" id="L677">    }</span>
  }

  /**
   * Deserializes the value from a 3 letter ISO format or the enumeration name itself to maintain as
   * much backwards compatibility as possible with e.g. the registry api.
   */
<span class="fc" id="L684">  public static class LenientDeserializer extends JsonDeserializer&lt;Language&gt; {</span>
    @Override
    public Language deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {
      try {
<span class="pc bpc" id="L688" title="2 of 4 branches missed.">        if (jp != null &amp;&amp; jp.getTextLength() &gt; 0) {</span>
<span class="fc" id="L689">          return lenientParse(jp.getText());</span>
        } else {
<span class="nc" id="L691">          return Language.UNKNOWN; // none provided</span>
        }
<span class="nc" id="L693">      } catch (Exception e) {</span>
<span class="nc" id="L694">        throw new IOException(</span>
            &quot;Unable to deserialize language from provided value (hint: not an ISO 2 or 3 character?): &quot;
<span class="nc" id="L696">                + jp.getText());</span>
      }
    }

    static Language lenientParse(String value) {
<span class="fc" id="L701">      Language l = Language.fromIsoCode(value);</span>
      // backwards compatible
<span class="fc bfc" id="L703" title="All 2 branches covered.">      if (Language.UNKNOWN == l) {</span>
        try {
<span class="fc" id="L705">          l = Language.valueOf(value);</span>
<span class="nc" id="L706">        } catch (IllegalArgumentException e) {</span>
<span class="nc" id="L707">          l = Language.UNKNOWN;</span>
<span class="fc" id="L708">        }</span>
      }
<span class="fc" id="L710">      return l;</span>
    }
  }

<span class="nc" id="L714">  public static class LenientKeyDeserializer extends KeyDeserializer {</span>

    @Override
    public Object deserializeKey(String key, DeserializationContext ctxt) throws IOException {
      try {
<span class="nc bnc" id="L719" title="All 2 branches missed.">        if (StringUtils.isNotEmpty(key)) {</span>
<span class="nc" id="L720">          return LenientDeserializer.lenientParse(key);</span>
        } else {
<span class="nc" id="L722">          return Language.UNKNOWN; // none provided</span>
        }
<span class="nc" id="L724">      } catch (Exception e) {</span>
<span class="nc" id="L725">        throw new IOException(</span>
            &quot;Unable to deserialize language from provided value (hint: not an ISO 2 or 3 character?): &quot;
                + key);
      }
    }
  }

<span class="nc" id="L732">  public static class IsoKeySerializer extends JsonSerializer&lt;Language&gt; {</span>

    @Override
    public void serialize(
        Language language, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)
        throws IOException {
<span class="nc" id="L738">      jsonGenerator.writeFieldName(language.getIso3LetterCode());</span>
<span class="nc" id="L739">    }</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>