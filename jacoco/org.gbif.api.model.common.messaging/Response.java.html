<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Response.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GBIF Common :: API</a> &gt; <a href="index.source.html" class="el_package">org.gbif.api.model.common.messaging</a> &gt; <span class="el_source">Response.java</span></div><h1>Response.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2020 Global Biodiversity Information Facility (GBIF)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.gbif.api.model.common.messaging;

import java.util.StringJoiner;

public class Response&lt;T&gt; {

  private String messageKey;
  private String message;
  private Status status;
  private Integer statusCode;
  private T content;

  private Throwable rootException;

<span class="nc" id="L30">  public Response() {</span>
<span class="nc" id="L31">  }</span>

<span class="nc" id="L33">  public Response(Response&lt;T&gt; response) {</span>
<span class="nc" id="L34">    message = response.message;</span>
<span class="nc" id="L35">    messageKey = response.messageKey;</span>
<span class="nc" id="L36">    status = response.status;</span>
<span class="nc" id="L37">    statusCode = response.statusCode;</span>
<span class="nc" id="L38">  }</span>

  /**
   * Constructor using status only.
   */
<span class="nc" id="L43">  public Response(Status status) {</span>
<span class="nc" id="L44">    this.status = status;</span>
<span class="nc" id="L45">  }</span>

<span class="nc" id="L47">  public Response(Status status, String messageKey) {</span>
<span class="nc" id="L48">    this.status = status;</span>
<span class="nc" id="L49">    this.messageKey = messageKey;</span>
<span class="nc" id="L50">  }</span>

<span class="nc" id="L52">  public Response(Status status, T content, String messageKey) {</span>
<span class="nc" id="L53">    this.status = status;</span>
<span class="nc" id="L54">    this.content = content;</span>
<span class="nc" id="L55">    this.messageKey = messageKey;</span>
<span class="nc" id="L56">  }</span>

  /**
   * @return the content
   */
  public T getContent() {
<span class="nc" id="L62">    return content;</span>
  }

  /**
   * @param content the content to set
   */
  public void setContent(T content) {
<span class="nc" id="L69">    this.content = content;</span>
<span class="nc" id="L70">  }</span>

  /**
   * @return the message
   */
  public String getMessage() {
<span class="nc" id="L76">    return message;</span>
  }

  /**
   * @param message the message to set
   */
  public void setMessage(String message) {
<span class="nc" id="L83">    this.message = message;</span>
<span class="nc" id="L84">  }</span>

  /**
   * @return the messageKey
   */
  public String getMessageKey() {
<span class="nc" id="L90">    return messageKey;</span>
  }

  /**
   * @param messageKey the messageKey to set
   */
  public void setMessageKey(String messageKey) {
<span class="nc" id="L97">    this.messageKey = messageKey;</span>
<span class="nc" id="L98">  }</span>

  /**
   * @return rootException when the response contains an error
   */
  public Throwable getRootException() {
<span class="nc" id="L104">    return rootException;</span>
  }

  /**
   * Sets the root exception when is error response.
   */
  public void setRootException(Throwable rootException) {
<span class="nc" id="L111">    this.rootException = rootException;</span>
<span class="nc" id="L112">  }</span>

  /**
   * @return the status
   */
  public Status getStatus() {
<span class="nc" id="L118">    return status;</span>
  }

  /**
   * @param status the status to set
   */
  public void setStatus(Status status) {
<span class="nc" id="L125">    this.status = status;</span>
<span class="nc" id="L126">  }</span>

  /**
   * @return the statusCode
   */
  public Integer getStatusCode() {
<span class="nc" id="L132">    return statusCode;</span>
  }

  /**
   * @param statusCode the statusCode to set
   */
  public void setStatusCode(Integer statusCode) {
<span class="nc" id="L139">    this.statusCode = statusCode;</span>
<span class="nc" id="L140">  }</span>

  public void copyTo(Response&lt;?&gt; response) {
<span class="nc" id="L143">    response.setStatus(status);</span>
<span class="nc" id="L144">    response.setStatusCode(statusCode);</span>
<span class="nc" id="L145">    response.setMessage(message);</span>
<span class="nc" id="L146">    response.setMessageKey(messageKey);</span>
<span class="nc" id="L147">    response.setRootException(response.getRootException());</span>
<span class="nc" id="L148">  }</span>

  public String statusReason() {
<span class="nc bnc" id="L151" title="All 2 branches missed.">    if (statusCode != null) {</span>
<span class="nc" id="L152">      return StatusCode.valueOf(statusCode).getReason();</span>
    }
<span class="nc" id="L154">    return null;</span>
  }

  @Override
  public String toString() {
<span class="nc" id="L159">    return new StringJoiner(&quot;, &quot;, Response.class.getSimpleName() + &quot;[&quot;, &quot;]&quot;)</span>
<span class="nc" id="L160">      .add(&quot;messageKey='&quot; + messageKey + &quot;'&quot;)</span>
<span class="nc" id="L161">      .add(&quot;message='&quot; + message + &quot;'&quot;)</span>
<span class="nc" id="L162">      .add(&quot;status=&quot; + status)</span>
<span class="nc" id="L163">      .add(&quot;statusCode=&quot; + statusCode)</span>
<span class="nc" id="L164">      .add(&quot;content=&quot; + content)</span>
<span class="nc" id="L165">      .add(&quot;rootException=&quot; + rootException)</span>
<span class="nc" id="L166">      .toString();</span>
  }

<span class="nc" id="L169">  public enum Status {</span>

<span class="nc" id="L171">    OK, ERROR</span>

  }

<span class="nc" id="L175">  public enum StatusCode {</span>

<span class="nc" id="L177">    OK(200, &quot;The request was accepted and the response entity-body contains the resource representation, &quot;</span>
<span class="nc" id="L178">      + &quot;if any is applicable&quot;), CREATED(201,</span>
      &quot;The request was accepted and resulted in the creation of a new resource. The response Location header contains&quot;
<span class="nc" id="L180">        + &quot; the created resource URI&quot;), ACCEPTED(202,</span>
      &quot;The client request has been accepted but is not handled in real time. The response Location header contains &quot;
<span class="nc" id="L182">        + &quot;the URI of a resource which can be used to check for progress&quot;), NO_CONTENT(204,</span>
      &quot;The client request was accepted but no resource representation is sent in response. A GET, POST, &quot;
<span class="nc" id="L184">        + &quot;PUT or DELETE might typically warrant this response.&quot;), MOVED_PERMANENTLY(301,</span>
      &quot;Sent when a client triggers an action that causes the URI of a resource change, &quot;
        + &quot;or if an old URI was requested. An example could be an update to a resource that causes a version &quot;
<span class="nc" id="L187">        + &quot;increment&quot;), SEE_OTHER(303,</span>
      &quot;The request has been processed, and the client is recommended to see another resource, &quot;
        + &quot;which is likely to be the resource they are seeking. This is used only for POST, &quot;
        + &quot;PUT or DELETE when the result might be a resource of interest. For the PortalAPI a GET will always return &quot;
<span class="nc" id="L191">        + &quot;a 307 instead of a 303.&quot;), NOT_MODIFIED(304,</span>
      &quot;Issued when the client provided the If-Modified-Since header and the representation has not changed. No &quot;
<span class="nc" id="L193">        + &quot;response entity-body will be given.&quot;), TEMPORARY_REDIRECT(307,</span>
      &quot;The request has not been processed, and the client is recommended to see another resource, &quot;
        + &quot;which is likely to be the resource they are seeking. This is returned should a client request a resource &quot;
        + &quot;in the canonical form (e.g. without a version number), which has a default representation as another &quot;
<span class="nc" id="L197">        + &quot;resource (e.g. the latest version).&quot;), BAD_REQUEST(400,</span>
      &quot;There was a problem on the client side, and further information, if any, is available will be given in the &quot;
<span class="nc" id="L199">        + &quot;response entity-body&quot;), UNAUTHORIZED(401,</span>
      &quot;The proper authentication credentials were not supplied to operate on the protected resource. Note that 403 &quot;
<span class="nc" id="L201">        + &quot;will be used when credentials are supplied and correct, but still disallowed&quot;), FORBIDDEN(403,</span>
      &quot;The authentication credentials supplied were correct, but do not allow operation on the protected resource&quot;),
<span class="nc" id="L203">    NOT_FOUND(404, &quot;The server does not know the resource being requested&quot;), CONFLICT(409,</span>
      &quot;Indicates that the operation was not accepted since it would leave one or more resources in an inconsistent &quot;
        + &quot;state. An example could be the deletion of a user account, which is referenced by annotations made by the &quot;
<span class="nc" id="L206">        + &quot;user.&quot;), INTERNAL_SERVER_ERROR(500,</span>
      &quot;There was a problem on the server side, and diagnostic information, if any, &quot;
<span class="nc" id="L208">        + &quot;is available in the response entity-body&quot;), SERVICE_UNAVAILABLE(503,</span>
      &quot;The server is responding, but the underlying systems are not operating correctly, &quot;
        + &quot;such as through resource starvation while under heavy load. A Retry-After header will be provided to &quot;
<span class="nc" id="L211">        + &quot;indicate the period at which the server suggest the client try again &quot;), SERVER_UNAVAILABLE(999,</span>
      &quot;The server is not responding or is too slow&quot;);

    private Integer code;

    private String reason;

    public static StatusCode valueOf(int statusCode) {
<span class="nc bnc" id="L219" title="All 2 branches missed.">      for (StatusCode value : StatusCode.values()) {</span>
<span class="nc bnc" id="L220" title="All 2 branches missed.">        if (value.getCode() == statusCode) {</span>
<span class="nc" id="L221">          return value;</span>
        }
      }
<span class="nc" id="L224">      return null;</span>
    }

<span class="nc" id="L227">    StatusCode(int code, String reason) {</span>
<span class="nc" id="L228">      this.code = code;</span>
<span class="nc" id="L229">      this.reason = reason;</span>
<span class="nc" id="L230">    }</span>

    /**
     * @return the code
     */
    public Integer getCode() {
<span class="nc" id="L236">      return code;</span>
    }

    /**
     * @param code the code to set
     */
    public void setCode(Integer code) {
<span class="nc" id="L243">      this.code = code;</span>
<span class="nc" id="L244">    }</span>

    /**
     * @return the reason
     */
    public String getReason() {
<span class="nc" id="L250">      return reason;</span>
    }

    /**
     * @param reason the reason to set
     */
    public void setReason(String reason) {
<span class="nc" id="L257">      this.reason = reason;</span>
<span class="nc" id="L258">    }</span>

  }

  /**
   * Builder for Response objects.
   * Source code generated using: http://code.google.com/p/bpep/.
   *
   * @param &lt;T&gt; type of the content field
   */
<span class="nc" id="L268">  public static class Builder&lt;T&gt; {</span>

    private String messageKey;
    private String message;
    private Status status;
    private Integer statusCode;
    private T content;
    private Throwable rootException;

    public Response&lt;T&gt; build() {
<span class="nc" id="L278">      Response&lt;T&gt; response = new Response&lt;T&gt;();</span>
<span class="nc" id="L279">      response.messageKey = messageKey;</span>
<span class="nc" id="L280">      response.message = message;</span>
<span class="nc" id="L281">      response.status = status;</span>
<span class="nc" id="L282">      response.statusCode = statusCode;</span>
<span class="nc" id="L283">      response.content = content;</span>
<span class="nc" id="L284">      response.rootException = rootException;</span>
<span class="nc" id="L285">      return response;</span>
    }

    public Builder&lt;T&gt; content(T content) {
<span class="nc" id="L289">      this.content = content;</span>
<span class="nc" id="L290">      return this;</span>
    }

    /**
     * Creates an builder using/copying a response object.
     */
    public Builder&lt;T&gt; fromResponse(Response&lt;?&gt; otherResponse) {
<span class="nc" id="L297">      return status(otherResponse.getStatus()).statusCode(otherResponse.getStatusCode())</span>
<span class="nc" id="L298">        .message(otherResponse.getMessage())</span>
<span class="nc" id="L299">        .messageKey(otherResponse.getMessageKey())</span>
<span class="nc" id="L300">        .rootException(otherResponse.getRootException());</span>
    }

    public Builder&lt;T&gt; message(String message) {
<span class="nc" id="L304">      this.message = message;</span>
<span class="nc" id="L305">      return this;</span>
    }

    public Builder&lt;T&gt; messageKey(String messageKey) {
<span class="nc" id="L309">      this.messageKey = messageKey;</span>
<span class="nc" id="L310">      return this;</span>
    }

    public Builder&lt;T&gt; rootException(Throwable rootException) {
<span class="nc" id="L314">      this.rootException = rootException;</span>
<span class="nc" id="L315">      return this;</span>
    }

    public Builder&lt;T&gt; status(Status status) {
<span class="nc" id="L319">      this.status = status;</span>
<span class="nc" id="L320">      return this;</span>
    }

    public Builder&lt;T&gt; statusCode(Integer statusCode) {
<span class="nc" id="L324">      this.statusCode = statusCode;</span>
<span class="nc" id="L325">      return this;</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>